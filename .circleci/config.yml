version: "2.1"
orbs:
    aws-ecr: circleci/aws-ecr@7.3.0
workflows:
    build_and_push_image:
        jobs:
            - aws-ecr/build-and-push-image:
                account-url: $account_url
                aws-access-key-id: $access_key
                aws-secret-access-key: $secret_access_key
                context: myContext
                create-repo: true
                profile-name: sachin
                region: AWS_REGION_ENV_VAR_NAME
                repo: $repo
                tag: $tag